{% comment %}
  Template: product.liquid or product-template.liquid
  For: /products/ayers-chambray
{% endcomment %}

<div class="min-h-screen bg-white">
  <section class="py-8 px-4 md:px-8">
    <div class="container mx-auto">
      <!-- Breadcrumb Removed -->

      <!-- Product Layout -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16">
        <!-- Product Images -->
        <div>
          <!-- Main Image -->
          <div class="relative rounded-2xl overflow-hidden bg-gradient-to-b from-gray-50 to-gray-100 mb-6">
            <div class="aspect-square relative">
              {% if product.featured_image %}
                <img
                  id="main-product-image"
                  src="{{ product.featured_image | img_url: '1000x1000' }}"
                  alt="{{ product.featured_image.alt | escape }}"
                  class="w-full h-full object-cover cursor-zoom-in"
                  loading="eager"
                  data-zoom="{{ product.featured_image | img_url: '2000x2000' }}"
                  width="1000"
                  height="1000"
                >
              {% else %}
                <div class="w-full h-full flex items-center justify-center">
                  <div class="text-gray-400 text-center">
                    <i class="fas fa-tshirt text-6xl mb-4"></i>
                    <p class="text-lg">No image available</p>
                  </div>
                </div>
              {% endif %}

              <!-- Sale Badge -->
              {% if product.compare_at_price > product.price %}
                <div class="absolute top-6 left-6 bg-gradient-to-r from-red-500 to-pink-500 text-white px-4 py-2 rounded-full text-sm font-bold tracking-wide shadow-xl">
                  SAVE
                  {{
                    product.compare_at_price
                    | minus: product.price
                    | times: 100
                    | divided_by: product.compare_at_price
                    | round
                  -}}
                  %
                </div>
              {% endif %}

              <!-- New Badge -->
              {% assign product_age = 'now' | date: '%s' | minus: product.created_at | date: '%s' | divided_by: 86400 %}
              {% if product_age < 30 %}
                <div class="absolute top-6 right-6 bg-gradient-to-r from-blue-500 to-indigo-500 text-white px-4 py-2 rounded-full text-sm font-bold tracking-wide shadow-xl">
                  NEW ARRIVAL
                </div>
              {% endif %}
            </div>
          </div>

          <!-- Thumbnail Images -->
          {% if product.images.size > 1 %}
            <div class="flex gap-4 overflow-x-auto pb-4 scrollbar-hide">
              {% for image in product.images %}
                <button
                  class="flex-shrink-0 w-20 h-20 md:w-24 md:h-24 rounded-xl overflow-hidden border-2 {% if forloop.first %}border-indigo-500{% else %}border-transparent hover:border-gray-300{% endif %} transition-all duration-300"
                  data-image-src="{{ image | img_url: '1000x1000' }}"
                  data-zoom-src="{{ image | img_url: '2000x2000' }}"
                  onclick="changeProductImage(this)"
                >
                  <img
                    src="{{ image | img_url: '200x200' }}"
                    alt="{{ image.alt | escape }}"
                    class="w-full h-full object-cover"
                    loading="lazy"
                    width="200"
                    height="200"
                  >
                </button>
              {% endfor %}
            </div>
          {% endif %}
        </div>

        <!-- Product Details -->
        <div>
          <!-- Title & Vendor -->
          <div class="mb-6">
            {% if product.vendor %}
              <p class="text-sm text-gray-600 mb-2">{{ product.vendor }}</p>
            {% endif %}
            <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4">{{ product.title }}</h1>

            <!-- Reviews -->
            <div class="flex items-center gap-3 mb-6">
              <div class="flex items-center">
                {% for i in (1..5) %}
                  {% if i <= 4 %}
                    <i class="fas fa-star text-yellow-400 text-sm"></i>
                  {% else %}
                    <i class="fas fa-star-half-alt text-yellow-400 text-sm"></i>
                  {% endif %}
                {% endfor %}
              </div>
              <span class="text-gray-600 text-sm">4.2 • 128 Reviews</span>
              <span class="text-green-600 text-sm font-medium flex items-center gap-1">
                <i class="fas fa-check-circle"></i>
                Verified Purchases
              </span>
            </div>
          </div>

          <!-- Price -->
          <div class="mb-8">
            <div class="flex items-center gap-4 mb-2">
              <span class="text-4xl font-bold text-gray-900">{{ product.price | money }}</span>
              {% if product.compare_at_price > product.price %}
                <span class="text-xl text-gray-500 line-through">{{ product.compare_at_price | money }}</span>
                <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-bold">
                  Save {{ product.compare_at_price | minus: product.price | money }}
                </span>
              {% endif %}
            </div>
            <p class="text-gray-600">
              {% if product.available %}
                <span class="text-green-600 font-medium flex items-center gap-2">
                  <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                  In Stock • Ready to Ship
                </span>
              {% else %}
                <span class="text-red-600 font-medium">Out of Stock</span>
              {% endif %}
            </p>
          </div>

          <!-- Product Description -->
          <div class="mb-8">
            <div class="prose max-w-none text-gray-700">
              {{ product.description }}
            </div>
          </div>

          <!-- Variant Selection -->
          <form action="/cart/add" method="post" id="add-to-cart-form" class="mb-8">
            {% if product.variants.size > 1 %}
              <!-- Color Variants -->
              {% for option in product.options_with_values %}
                {% if option.name == 'Color' %}
                  <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">
                      Color: <span id="selected-color" class="font-normal text-gray-700">Select</span>
                    </h3>
                    <div class="flex flex-wrap gap-3">
                      {% for value in option.values %}
                        <button
                          type="button"
                          class="variant-color-btn px-2 py-1.5 rounded-md border-2 {% if forloop.first %}border-indigo-500 bg-indigo-50{% else %}border-gray-200 hover:border-gray-300{% endif %} transition-all duration-300"
                          data-value="{{ value }}"
                          onclick="selectVariant('{{ option.name }}', '{{ value }}')"
                        >
                          <div class="flex items-center gap-3">
                            {% assign color_name = value | downcase %}
                            <div
                              class="w-6 h-6 rounded-full {% if color_name contains 'white' %}bg-gray-100 border border-gray-300{% elsif color_name contains 'black' %}bg-gray-900{% elsif color_name contains 'blue' %}bg-blue-500{% elsif color_name contains 'red' %}bg-red-500{% elsif color_name contains 'green' %}bg-green-500{% elsif color_name contains 'yellow' %}bg-yellow-400{% elsif color_name contains 'pink' %}bg-pink-400{% elsif color_name contains 'purple' %}bg-purple-500{% elsif color_name contains 'gray' %}bg-gray-400{% else %}bg-gray-300{% endif %}"
                            ></div>
                            <span class="font-medium text-gray-900">{{ value }}</span>
                          </div>
                        </button>
                      {% endfor %}
                    </div>
                  </div>
                {% endif %}
              {% endfor %}

              <!-- Size Variants -->
              {% for option in product.options_with_values %}
                {% if option.name == 'Size' %}
                  <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">
                      Size: <span id="selected-size" class="font-normal text-gray-700">Select</span>
                    </h3>
                    <div class="flex flex-wrap gap-3">
                      {% for value in option.values %}
                        <button
                          type="button"
                          class="variant-size-btn px-3 py-1.5 text-sm rounded-md border-2 border-gray-200 hover:border-gray-300 transition-all duration-300 font-medium text-gray-900"
                          data-value="{{ value }}"
                          onclick="selectVariant('{{ option.name }}', '{{ value }}')"
                        >
                          {{ value }}
                        </button>
                      {% endfor %}
                    </div>
                    <a
                      href="/pages/size-guide"
                      class="inline-block mt-3 text-indigo-600 hover:text-indigo-800 text-sm font-medium transition-colors duration-300"
                    >
                      <i class="fas fa-ruler mr-1"></i>
                      Size Guide
                    </a>
                  </div>
                {% endif %}
              {% endfor %}
            {% endif %}

            <!-- Quantity -->
            <div class="mb-8">
              <h3 class="text-lg font-semibold text-gray-900 mb-4">Quantity</h3>
              <div class="flex items-center gap-4">
                <div class="flex items-center border border-gray-300 rounded-lg">
                  <button
                    type="button"
                    onclick="updateQuantity(-1)"
                    class="px-3 py-2 text-gray-600 hover:text-gray-900 transition-colors duration-300"
                  >
                    <i class="fas fa-minus"></i>
                  </button>
                  <input
                    type="number"
                    id="quantity"
                    name="quantity"
                    value="1"
                    min="1"
                    max="10"
                    class="w-16 text-center py-2 text-gray-900 font-medium border-x border-gray-300 focus:outline-none"
                  >
                  <button
                    type="button"
                    onclick="updateQuantity(1)"
                    class="px-3 py-2 text-gray-600 hover:text-gray-900 transition-colors duration-300"
                  >
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <span class="text-sm text-gray-600">Only 5 items left in stock!</span>
              </div>
            </div>

            <!-- Add to Cart Button -->
            <div class="mb-8">
              <input
                type="hidden"
                name="id"
                id="product-variant-id"
                value="{{ product.selected_or_first_available_variant.id }}"
              >
              <button
                type="submit"
                name="add"
                id="add-to-cart"
                class="w-full bg-gray-900 text-white py-2.5 px-6 rounded-lg font-bold text-sm hover:bg-gray-800 transition-all duration-300 flex items-center justify-center gap-2 group shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed uppercase tracking-wide"
                {% unless product.available %}
                  disabled
                {% endunless %}
              >
                <i class="fas fa-shopping-cart group-hover:scale-110 transition-transform duration-300"></i>
                {% if product.available %}
                  Add to Cart • {{ product.price | money }}
                {% else %}
                  Out of Stock
                {% endif %}
              </button>

              <!-- Buy Now Button -->
              <button
                type="button"
                onclick="buyNow()"
                class="w-full bg-white text-indigo-600 border-2 border-indigo-600 py-2.5 px-6 rounded-lg font-bold text-sm hover:bg-indigo-50 transition-all duration-300 flex items-center justify-center gap-2 group mt-3 shadow-lg hover:shadow-xl uppercase tracking-wide"
                {% unless product.available %}
                  disabled
                {% endunless %}
              >
                <i class="fas fa-bolt group-hover:rotate-12 transition-transform duration-300"></i>
                Buy Now
              </button>
            </div>
          </form>

          <!-- Product Features -->
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-full bg-green-100 flex items-center justify-center">
                <i class="fas fa-truck text-green-600"></i>
              </div>
              <div>
                <p class="font-medium text-gray-900">Free Shipping</p>
                <p class="text-sm text-gray-600">On orders over $50</p>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-full bg-blue-100 flex items-center justify-center">
                <i class="fas fa-undo text-blue-600"></i>
              </div>
              <div>
                <p class="font-medium text-gray-900">30-Day Returns</p>
                <p class="text-sm text-gray-600">Easy returns policy</p>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center">
                <i class="fas fa-shield-alt text-purple-600"></i>
              </div>
              <div>
                <p class="font-medium text-gray-900">2-Year Warranty</p>
                <p class="text-sm text-gray-600">Quality guaranteed</p>
              </div>
            </div>
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 rounded-full bg-pink-100 flex items-center justify-center">
                <i class="fas fa-leaf text-pink-600"></i>
              </div>
              <div>
                <p class="font-medium text-gray-900">Eco-Friendly</p>
                <p class="text-sm text-gray-600">Sustainable materials</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Product Tabs -->
      <div class="mt-20">
        <div class="border-b border-gray-200 mb-8">
          <nav class="flex flex-wrap gap-8">
            <button
              class="tab-button text-lg font-semibold pb-4 border-b-2 border-indigo-600 text-indigo-600"
              data-tab="description"
            >
              Description
            </button>
            <button
              class="tab-button text-lg font-semibold pb-4 border-b-2 border-transparent text-gray-600 hover:text-gray-900"
              data-tab="details"
            >
              Details
            </button>
            <button
              class="tab-button text-lg font-semibold pb-4 border-b-2 border-transparent text-gray-600 hover:text-gray-900"
              data-tab="reviews"
            >
              Reviews (128)
            </button>
            <button
              class="tab-button text-lg font-semibold pb-4 border-b-2 border-transparent text-gray-600 hover:text-gray-900"
              data-tab="shipping"
            >
              Shipping & Returns
            </button>
          </nav>
        </div>

        <!-- Tab Content -->
        <div id="tab-content">
          <!-- Description Tab (Default) -->
          <div id="description-tab" class="tab-content active">
            <div class="prose max-w-none">
              <h3 class="text-2xl font-bold text-gray-900 mb-6">Product Details</h3>
              <p class="text-gray-700 mb-6">
                This premium apparel piece combines comfort, style, and sustainability. Crafted from high-quality
                materials designed to last through seasons while maintaining its shape and color.
              </p>
              <ul class="space-y-3 text-gray-700">
                <li class="flex items-start gap-3">
                  <i class="fas fa-check text-green-500 mt-1"></i>
                  <span>Made from 100% organic cotton for breathable comfort</span>
                </li>
                <li class="flex items-start gap-3">
                  <i class="fas fa-check text-green-500 mt-1"></i>
                  <span>Reinforced stitching for enhanced durability</span>
                </li>
                <li class="flex items-start gap-3">
                  <i class="fas fa-check text-green-500 mt-1"></i>
                  <span>Color-fast dyes that resist fading</span>
                </li>
                <li class="flex items-start gap-3">
                  <i class="fas fa-check text-green-500 mt-1"></i>
                  <span>Eco-friendly production process</span>
                </li>
              </ul>
            </div>
          </div>

          <!-- Details Tab -->
          <div id="details-tab" class="tab-content hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              <div>
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Specifications</h3>
                <div class="space-y-4">
                  <div class="border-b border-gray-100 pb-4">
                    <p class="font-medium text-gray-900">Material</p>
                    <p class="text-gray-600">100% Organic Cotton</p>
                  </div>
                  <div class="border-b border-gray-100 pb-4">
                    <p class="font-medium text-gray-900">Care Instructions</p>
                    <p class="text-gray-600">Machine wash cold, tumble dry low</p>
                  </div>
                  <div class="border-b border-gray-100 pb-4">
                    <p class="font-medium text-gray-900">Origin</p>
                    <p class="text-gray-600">Ethically made in Portugal</p>
                  </div>
                  <div>
                    <p class="font-medium text-gray-900">Weight</p>
                    <p class="text-gray-600">250 g/m²</p>
                  </div>
                </div>
              </div>
              <div>
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Size & Fit</h3>
                <p class="text-gray-700 mb-4">
                  True to size. For a relaxed fit, consider sizing up. For a slim fit, consider sizing down.
                </p>
                <a
                  href="/pages/size-guide"
                  class="inline-flex items-center gap-2 text-indigo-600 font-medium hover:text-indigo-800 transition-colors duration-300"
                >
                  View Detailed Size Chart
                  <i class="fas fa-external-link-alt text-sm"></i>
                </a>
              </div>
            </div>
          </div>

          <!-- Reviews Tab -->
          <div id="reviews-tab" class="tab-content hidden">
            <div class="max-w-2xl">
              <h3 class="text-2xl font-bold text-gray-900 mb-6">Customer Reviews</h3>
              <div class="space-y-8">
                <!-- Sample Review 1 -->
                <div class="border-b border-gray-100 pb-8">
                  <div class="flex items-center gap-3 mb-3">
                    <div class="flex">
                      {% for i in (1..5) %}
                        <i class="fas fa-star text-yellow-400 text-sm"></i>
                      {% endfor %}
                    </div>
                    <span class="text-gray-900 font-medium">Sarah M.</span>
                    <span class="text-gray-500 text-sm">• Verified Purchase</span>
                  </div>
                  <p class="text-gray-700 mb-2">
                    "Absolutely love this! The fabric is so soft and the fit is perfect. Will definitely be purchasing
                    more colors."
                  </p>
                  <p class="text-gray-500 text-sm">Posted on March 15, 2024</p>
                </div>

                <!-- Sample Review 2 -->
                <div>
                  <div class="flex items-center gap-3 mb-3">
                    <div class="flex">
                      {% for i in (1..4) %}
                        <i class="fas fa-star text-yellow-400 text-sm"></i>
                      {% endfor %}
                      <i class="far fa-star text-yellow-400 text-sm"></i>
                    </div>
                    <span class="text-gray-900 font-medium">James L.</span>
                    <span class="text-gray-500 text-sm">• Verified Purchase</span>
                  </div>
                  <p class="text-gray-700 mb-2">
                    "Great quality, but runs a bit small. I'd recommend sizing up if you're between sizes."
                  </p>
                  <p class="text-gray-500 text-sm">Posted on February 28, 2024</p>
                </div>
              </div>

              <button class="mt-8 bg-gray-100 text-gray-900 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors duration-300">
                Load More Reviews
              </button>
            </div>
          </div>

          <!-- Shipping Tab -->
          <div id="shipping-tab" class="tab-content hidden">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
              <div>
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Shipping Information</h3>
                <div class="space-y-4">
                  <div class="border-b border-gray-100 pb-4">
                    <p class="font-medium text-gray-900">Standard Shipping</p>
                    <p class="text-gray-600">3-5 business days • Free on orders over $50</p>
                  </div>
                  <div class="border-b border-gray-100 pb-4">
                    <p class="font-medium text-gray-900">Express Shipping</p>
                    <p class="text-gray-600">1-2 business days • $9.99</p>
                  </div>
                  <div class="border-b border-gray-100 pb-4">
                    <p class="font-medium text-gray-900">International Shipping</p>
                    <p class="text-gray-600">7-14 business days • Rates vary by location</p>
                  </div>
                </div>
              </div>
              <div>
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Return Policy</h3>
                <p class="text-gray-700 mb-4">
                  We offer free returns within 30 days of delivery. Items must be unworn, unwashed, and with original
                  tags attached.
                </p>
                <ul class="space-y-2 text-gray-700">
                  <li class="flex items-start gap-2">
                    <i class="fas fa-check-circle text-green-500 mt-1"></i>
                    <span>Free return shipping within the US</span>
                  </li>
                  <li class="flex items-start gap-2">
                    <i class="fas fa-check-circle text-green-500 mt-1"></i>
                    <span>Refund processed within 5 business days</span>
                  </li>
                  <li class="flex items-start gap-2">
                    <i class="fas fa-check-circle text-green-500 mt-1"></i>
                    <span>Exchanges available for different sizes/colors</span>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Related Products -->
      <div class="mt-24">
        <h2 class="text-3xl font-bold text-gray-900 mb-10 text-center">You Might Also Like</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
          <!-- Related Product Cards -->
          {% assign related_collection = collections.all %}
          {% assign related_products = related_collection.products | where: 'available', true %}

          {% for related_product in related_products %}
            {% unless related_product.handle == product.handle %}
              <div class="group">
                <a href="{{ related_product.url }}" class="block">
                  <div class="relative overflow-hidden rounded-2xl mb-5 bg-gradient-to-b from-gray-50 to-gray-100">
                    <div class="aspect-[3/4] relative">
                      {% if related_product.featured_image %}
                        <img
                          src="{{ related_product.featured_image | img_url: '600x800', crop: 'center' }}"
                          alt="{{ related_product.featured_image.alt | escape }}"
                          class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"
                          loading="lazy"
                          width="600"
                          height="800"
                        >
                      {% endif %}
                    </div>
                  </div>
                  <div class="px-2">
                    <h3 class="font-semibold text-gray-900 mb-2">{{ related_product.title }}</h3>
                    <div class="flex items-center gap-3">
                      <span class="text-xl font-bold text-gray-900">{{ related_product.price | money }}</span>
                      {% if related_product.compare_at_price > related_product.price %}
                        <span class="text-sm text-gray-500 line-through">
                          {{- related_product.compare_at_price | money -}}
                        </span>
                      {% endif %}
                    </div>
                  </div>
                </a>
              </div>
            {% endunless %}
          {% endfor %}
        </div>
      </div>
    </div>
  </section>
</div>

<style>
  /* Scrollbar hide */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Tab animations */
  .tab-content {
    animation: fadeIn 0.3s ease;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Quantity input number spinner hide */
  input[type='number']::-webkit-inner-spin-button,
  input[type='number']::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type='number'] {
    -moz-appearance: textfield;
  }

  /* Prose styles for descriptions */
  .prose ul {
    list-style-type: none;
    padding-left: 0;
  }
</style>

<script>
  // Global functions for onclick handlers
  function changeProductImage(button) {
    const mainImage = document.getElementById('main-product-image');
    const imageSrc = button.getAttribute('data-image-src');
    const zoomSrc = button.getAttribute('data-zoom-src');

    if (mainImage && imageSrc) {
      mainImage.src = imageSrc;
      if (zoomSrc) mainImage.setAttribute('data-zoom', zoomSrc);
    }

    // Update active thumbnail
    document.querySelectorAll('.variant-color-btn, .variant-size-btn').forEach((btn) => {
      // Note: This logic seems specific to variant buttons, but the image button is also clicked.
      // Let's just handle the border reset for image buttons if needed, or keep as is.
      // The original code removed border-indigo-500 from variant buttons when image clicked.
      // We'll keep the logic simple.
    });

    // Remove active class from all image thumbnails
    const thumbnails = button.parentElement.querySelectorAll('button');
    thumbnails.forEach((btn) => {
      btn.classList.remove('border-indigo-500');
      btn.classList.add('border-transparent');
    });

    // Add active class to clicked
    button.classList.remove('border-transparent', 'hover:border-gray-300');
    button.classList.add('border-indigo-500');
  }

  function updateQuantity(change) {
    const quantityInput = document.getElementById('quantity');
    if (!quantityInput) return;

    let newQuantity = parseInt(quantityInput.value) + change;
    if (newQuantity < 1) newQuantity = 1;
    if (newQuantity > 10) newQuantity = 10;
    quantityInput.value = newQuantity;
  }

  function selectVariant(optionName, value) {
    // Update selected text
    if (optionName === 'Color') {
      const el = document.getElementById('selected-color');
      if (el) el.textContent = value;
    } else if (optionName === 'Size') {
      const el = document.getElementById('selected-size');
      if (el) el.textContent = value;
    }

    // Update button styles
    const buttons = document.querySelectorAll(`[data-value="${value}"]`);
    document.querySelectorAll(`.variant-${optionName.toLowerCase()}-btn`).forEach((btn) => {
      btn.classList.remove('border-indigo-500', 'bg-indigo-50');
      btn.classList.add('border-gray-200'); // Updated border color to match new design
    });

    buttons.forEach((btn) => {
      btn.classList.remove('border-gray-200');
      btn.classList.add('border-indigo-500', 'bg-indigo-50');
    });
  }

  function buyNow() {
    const form = document.getElementById('add-to-cart-form');
    if (form) {
      // In a real app we might append a hidden input to signal direct checkout
      form.submit();
    }
  }

  document.addEventListener('DOMContentLoaded', function () {
    // Tab Switching
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');

    tabButtons.forEach((button) => {
      button.addEventListener('click', function () {
        const tabId = this.getAttribute('data-tab');

        // Update active tab button
        tabButtons.forEach((btn) => {
          btn.classList.remove('border-indigo-600', 'text-indigo-600');
          btn.classList.add('border-transparent', 'text-gray-600');
        });

        this.classList.remove('border-transparent', 'text-gray-600');
        this.classList.add('border-indigo-600', 'text-indigo-600');

        // Show active tab content
        tabContents.forEach((content) => {
          content.classList.remove('active');
          content.classList.add('hidden');
        });

        const activeTab = document.getElementById(`${tabId}-tab`);
        if (activeTab) {
          activeTab.classList.remove('hidden');
          activeTab.classList.add('active');
        }
      });
    });

    // Form submission animation
    const addToCartForm = document.getElementById('add-to-cart-form');
    const addToCartBtn = document.getElementById('add-to-cart');

    if (addToCartForm && addToCartBtn) {
      addToCartForm.addEventListener('submit', function (e) {
        e.preventDefault();

        const originalText = addToCartBtn.innerHTML;
        addToCartBtn.innerHTML = `
            <i class="fas fa-spinner fa-spin"></i>
            Adding...
          `;
        addToCartBtn.disabled = true;

        // Simulate API call
        setTimeout(() => {
          addToCartBtn.innerHTML = `
              <i class="fas fa-check"></i>
              Added!
            `;
          addToCartBtn.classList.remove('bg-gray-900');
          addToCartBtn.classList.add('bg-green-600');

          setTimeout(() => {
            addToCartBtn.innerHTML = originalText;
            addToCartBtn.classList.remove('bg-green-600');
            addToCartBtn.classList.add('bg-gray-900');
            addToCartBtn.disabled = false;
          }, 1500);
        }, 1000);
      });
    }

    // Image zoom on hover
    const mainImage = document.getElementById('main-product-image');
    if (mainImage) {
      mainImage.addEventListener('mouseenter', function () {
        const zoomSrc = this.getAttribute('data-zoom');
        if (zoomSrc) {
          this.style.transform = 'scale(1.1)';
          this.style.transition = 'transform 0.5s ease';
        }
      });

      mainImage.addEventListener('mouseleave', function () {
        this.style.transform = 'scale(1)';
      });
    }
  });
</script>
